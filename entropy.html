<!DOCTYPE html>
<html>
    <head>
        <title>Entropy - timkay</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <script src="jquery.js"></script>
        <script src="weedit.js" defer></script>
        entropy: <input id="input" size="70">
        <pre>select host, user, password, authentication_string, password_expired from mysql.user;
</pre>
        <script>
            console.clear();
            function login(pw) {
                const output = [
                    `docker exec -it mariadb mysql`,
                    `--ssl-ca=/etc/mysql/certs/root-ca.pem`,
                    `--ssl-cert=/etc/mysql/certs/server-cert.pem`,
                    `--ssl-key=/etc/mysql/certs/server-key.pem`,
                    `-h localhost -P 7306 -u root -p${pw} zerolock`
                ];
                $('pre').append(output.join(' ') + `\n`);
            }
            login('Kt9uPMq1eQH5A6jQTrgN8RR7Z7DqrEq6');
            $('#input').on('change', event => {
                const input = $(event.target).val();
                const cipher = '8J5OY2vsMZSk4bFhcQP3XaVxDpWBGoNAeqCm9lLzIKEn76tURydHuTrgj01iwf';
                const pw = input.split('').map((ch) => {
                    const code = ch.charCodeAt(0);
                    let ceod;
                    if ('A' <= ch && ch <= 'Z') ceod = code - 'A'.charCodeAt(0) + 0;
                    if ('a' <= ch && ch <= 'z') ceod = code - 'a'.charCodeAt(0) + 26;
                    if ('0' <= ch && ch <= '9') ceod = code - '0'.charCodeAt(0) + 52;
                    return cipher[ceod];
                }).join('');
                login(pw);
            });
        </script>
    </body>
</html>
